<div class="card">
  <h4 class="card-header">Operations</h4>
  <div class="card-body">
    <form [formGroup]="form">
      <div>
        <label for="account">Account</label>
        <select id="account" formControlName="account" class="form-select">
          <option *ngFor="let opt of accounts" [value]="opt.id">{{opt.iban}}</option>
        </select>
        <div *ngIf="submitted && f.account.errors" class="invalid-feedback">
          <div *ngIf="f.account.errors.required">Amount is required</div>
        </div>
      </div>
      <div class="form-group">
        <label for="amount">Amount</label>
        <input id="amount" type="text" formControlName="amount" type="number" (input)="showMessage = false;"
               pattern="[0-9]*" class="form-control" [ngClass]="{ 'is-invalid': submitted && f.amount.errors }" />
        <div *ngIf="submitted && f.amount.errors" class="invalid-feedback">
          <div *ngIf="f.amount.errors.required">Amount is required</div>
        </div>
      </div>
      <div class="form-group">
        <button [disabled]="disableButton()" class="btn btn-primary" (click)="deposit()">
          <span *ngIf="loading" class="spinner-border spinner-border-sm mr-1"></span>
          Deposit
        </button>
        <button [disabled]="disableButton()" class="btn btn-primary" (click)="withdrawal()">
          <span *ngIf="loading" class="spinner-border spinner-border-sm mr-1"></span>
          Withdrawal
        </button>
      </div>
      <div class="form-group" *ngIf="showMessage">
        <span class="text-success">Operation successful</span>
      </div>
    </form>
    <div>
      <button class="btn" (click)="goToHistory()">Go to operations history</button>
    </div>
  </div>
</div>
